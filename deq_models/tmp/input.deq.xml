<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dra SYSTEM "dra.dtd">
<dra>
  <states>
    <state>
      <id>kk_0</id>
      <available-registers />
    </state>

    <state>
      <id>kk_1</id>
      <available-registers> 
        <register>1</register>
      </available-registers>
    </state>
    
    <state>
      <id>kk_2</id>
      <available-registers> 
        <register>2</register>
      </available-registers>
    </state>
    
    <state>
      <id>s0</id>
      <available-registers> 
        <register>1</register>
        <register>2</register>
        <register>10000</register>
      </available-registers>
    </state>
    
    <state>
      <id>s2</id>
      <available-registers> 
        <register>1</register>
        <register>2</register>
        <register>10000</register>
      </available-registers>
    </state>
    
    <state>
      <id>s3</id>
      <available-registers> 
        <register>1</register>
        <register>2</register>
        <register>10000</register>
      </available-registers>
    </state>
    
    <state>
      <id>s4</id>
      <available-registers> 
        <register>1</register>
        <register>2</register>
        <register>10000</register>
      </available-registers>
    </state>
    
    <state>
      <id>s1</id>
      <available-registers> 
        <register>1</register>
        <register>2</register>
        <register>10000</register>
      </available-registers>
    </state>
    
    <state>
      <id>s5</id>
      <available-registers> 
        <register>1</register>
        <register>2</register>
        <register>10000</register>
      </available-registers>
    </state>
  </states>
  <initial-state>kk_0</initial-state>
  <transitions>
    <transition>
      <from>kk_0</from>
      <input>ISet</input>
      <op>LFresh</op>
      <register>1</register>
      <to>kk_1</to>
    </transition>

    <transition>
      <from>kk_1</from>
      <input>ISet</input>
      <op>LFresh</op>
      <register>2</register>
      <to>kk_2</to>
    </transition>

    <transition>
      <from>s0</from>
      <input>IKnownReceive</input>
      <op>Read</op>
      <register>1</register>
      <to>s1</to>
    </transition>

    <transition>
      <from>s0</from>
      <input>IFreshReceive</input>
      <op>LFresh</op>
      <register>2</register>
      <to>s2</to>
    </transition>

    <transition>
      <from>s0</from>
      <input>IFreshSend</input>
      <op>LFresh</op>
      <register>2</register>
      <to>s3</to>
    </transition>

    <transition>
      <from>s1</from>
      <input>IFreshSend</input>
      <op>LFresh</op>
      <register>1</register>
      <to>s4</to>
    </transition>

    <transition>
      <from>s2</from>
      <input>IFreshSend</input>
      <op>LFresh</op>
      <register>1</register>
      <to>s5</to>
    </transition>

    <transition>
      <from>s3</from>
      <input>IKnownReceive</input>
      <op>Read</op>
      <register>1</register>
      <to>s5</to>
    </transition>

    <transition>
      <from>s3</from>
      <input>IKnownReceive</input>
      <op>Read</op>
      <register>2</register>
      <to>s5</to>
    </transition>

    <transition>
      <from>s3</from>
      <input>IFreshReceive</input>
      <op>LFresh</op>
      <register>1</register>
      <to>s5</to>
    </transition>

    <transition>
      <from>s0</from>
      <input>ITau</input>
      <op>Read</op>
      <register>10000</register>
      <to>s4</to>
    </transition>
  </transitions>
</dra>