<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<register-automaton>
  <alphabet>
    <inputs>
      <symbol name="ISend">
        <param name="p0" type="int"/>
        <param name="p1" type="int"/>
      </symbol>
      <symbol name="IReceive">
        <param name="p0" type="int"/>
        <param name="p1" type="int"/>
      </symbol>
      <symbol name="ITau"/>
      <symbol name="ISet">
        <param name="p0" type="int"/>
      </symbol>
    </inputs>
    <outputs>
      <symbol name="OOK"/>
      <symbol name="OFinal"/>
      <symbol name="ODummy"/>
    </outputs>
  </alphabet>
  <globals>
    <variable type="int" name="r1">0</variable>
    <variable type="int" name="r2">0</variable>
  </globals>
  <locations>
    <location name="q0" initial="true"/>
    <location name="q1"/>
    <location name="q2"/>
    <location name="q3"/>
    <location name="q4"/>
    <location name="vk_0"/>
    <location name="vk_1"/>
    <location name="vk_2"/>
    <location name="sink"/>
    <location name="sink_two"/>
  </locations>
  <transitions>
    <transition from="q0" to="vk_0" symbol="ISet" params="x1">
      <assignments>
        <assign to="r1">x1</assign>
      </assignments>
    </transition>
    <transition from="q1" to="vk_1" symbol="ISend" params="x1,x2">
      <guard>r1==x1 &amp;&amp; r1!=x2
      </guard>
      <assignments>
        <assign to="r2">x2</assign>
      </assignments>
    </transition>
    <transition from="q2" to="q4" symbol="IReceive" params="x1,x2">
      <guard>r1==x1
      </guard>
    </transition>
    <transition from="q1" to="vk_2" symbol="IReceive" params="x1,x2">
      <guard>r1==x1
      </guard>
      <assignments>
        <assign to="r2">x2</assign>
      </assignments>
    </transition>
    <transition from="q3" to="q4" symbol="ISend" params="x1,x2">
      <guard>r1==x1 &amp;&amp; (r1!=x2 &amp;&amp; r2!=x2)
      </guard>
    </transition>
    <transition from="q1" to="q4" symbol="ITau"/>
    <transition from="vk_0" to="q1" symbol="OOK"/>
    <transition from="vk_1" to="q2" symbol="OOK"/>
    <transition from="vk_2" to="q3" symbol="OOK"/>
    <transition from="q4" to="sink_two" symbol="OFinal"/>
    <transition from="q0" to="sink" symbol="ISend" params="x1,x2"/>
    <transition from="q0" to="sink" symbol="IReceive" params="x1,x2"/>
    <transition from="q0" to="sink" symbol="ITau"/>
    <transition from="q1" to="sink" symbol="ISend" params="x1,x2">
      <guard>r1!=x1 || r1==x2
      </guard>
    </transition>
    <transition from="q1" to="sink" symbol="IReceive" params="x1,x2">
      <guard>r1!=x1
      </guard>
    </transition>
    <transition from="q1" to="sink" symbol="ISet" params="x1"/>
    <transition from="q2" to="sink" symbol="ISend" params="x1,x2"/>
    <transition from="q2" to="sink" symbol="IReceive" params="x1,x2">
      <guard>r1!=x1
      </guard>
    </transition>
    <transition from="q2" to="sink" symbol="ITau"/>
    <transition from="q2" to="sink" symbol="ISet" params="x1"/>
    <transition from="q3" to="sink" symbol="ISend" params="x1,x2">
      <guard>r1!=x1 || (r1==x2 || r2==x2)
      </guard>
    </transition>
    <transition from="q3" to="sink" symbol="IReceive" params="x1,x2"/>
    <transition from="q3" to="sink" symbol="ITau"/>
    <transition from="q3" to="sink" symbol="ISet" params="x1"/>
    <transition from="sink_two" to="sink" symbol="ISend" params="x1,x2"/>
    <transition from="sink_two" to="sink" symbol="IReceive" params="x1,x2"/>
    <transition from="sink_two" to="sink" symbol="ITau"/>
    <transition from="sink_two" to="sink" symbol="ISet" params="x1"/>
    <transition from="sink" to="sink_two" symbol="ODummy"/>
  </transitions>
</register-automaton>